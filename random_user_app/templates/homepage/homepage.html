{% extends "base.html" %}

{% block head %}
    {{ super() }}
    <link rel="stylesheet" href="{{ url_for('static', path='css/homepage/homepage.css') }}">
{% endblock %}

{% block title %}{{ data.title }}{% endblock %}

{% block content %}

<div class="center-block">
    <h1>{{ title }}</h1>   
    <form method="post" action="/homepage/fetch">
        <label for="count">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:</label>
        <input type="number" name="count" id="count" min="1" value=1>
        <input type="hidden" name="current_total" value="{{ data.total }}">
        <button type="submit" class="btn">–ü–æ–ª—É—á–∏—Ç—å</button>
    </form>

    <a href="/homepage/random" class="btn blue wide-btn">üé≤ –û—Ç–∫—Ä—ã—Ç—å —Å–ª—É—á–∞–π–Ω–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</a>
</div>

{% if data.users %}
<div class="table-wrapper">

    <table>
        <thead>
            <tr>
                <th>–ü–æ–ª</th>
                <th>–ò–º—è</th>
                <th>–§–∞–º–∏–ª–∏—è</th>
                <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                <th>Email</th>
                <th>–ê–¥—Ä–µ—Å –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è</th>
                <th>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</th>
            </tr>
        </thead>
        <tbody>
            {% for user in data.users %}
            <tr>
                <td>{{ user.gender }}</td>
                <td>{{ user.first_name }}</td>
                <td>{{ user.last_name }}</td>
                <td>{{ user.phone }}</td>
                <td>{{ user.email }}</td>
                <td>{{ user.location }}</td>
                <td><img src="{{ user.image }}" alt=""></td>
                <td>
                    <a href="/homepage/{{ user.id_pk }}" class="btn">–û—Ç–∫—Ä—ã—Ç—å</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
<div class="pagination">
    {% set prev_offset = data.offset - data.limit if data.offset - data.limit >= 0 else 0 %}
    <a href="/homepage?limit={{ data.limit }}&offset={{ prev_offset }}" class="page-arrow{% if data.offset == 0 %} disabled{% endif %}">&laquo; –ù–∞–∑–∞–¥</a>
    <span>–°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ (data.offset // data.limit) + 1 }} –∏–∑ {{ ((data.total - 1) // data.limit) + 1 }}</span>
    {% set next_offset = data.offset + data.limit %}
    <a href="/homepage?limit={{ data.limit }}&offset={{ next_offset }}" class="page-arrow{% if next_offset >= data.total %} disabled{% endif %}">–í–ø–µ—Ä—ë–¥ &raquo;</a>
</div>
{% else %}
<p>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.</p>
{% endif %}
{% endblock %}
